<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setting up the projects | EmbeddedFPSExample</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/EmbeddedFPSExample/assets/css/0.styles.32e58400.css" as="style"><link rel="preload" href="/EmbeddedFPSExample/assets/js/app.debd0cf8.js" as="script"><link rel="preload" href="/EmbeddedFPSExample/assets/js/2.6b282e9d.js" as="script"><link rel="preload" href="/EmbeddedFPSExample/assets/js/20.2f1b2705.js" as="script"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/10.021f36e7.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/11.710a60b5.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/12.dabfb87e.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/13.6ea62ec4.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/14.62a0b14a.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/15.e4fe2066.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/16.92f92ea2.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/17.a10b7396.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/18.1f2cce65.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/19.c0a5a8eb.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/3.2e9c32b1.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/4.5667f98c.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/5.a89d39a3.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/6.1e5c2305.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/7.237b2ecd.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/8.20703bf5.js"><link rel="prefetch" href="/EmbeddedFPSExample/assets/js/9.7cddb3eb.js">
    <link rel="stylesheet" href="/EmbeddedFPSExample/assets/css/0.styles.32e58400.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/EmbeddedFPSExample/" class="home-link router-link-active"><!----> <span class="site-name">EmbeddedFPSExample</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/EmbeddedFPSExample/guide/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/EmbeddedFPSExample/guide/setting-up-the-projects.html" aria-current="page" class="active sidebar-link">Setting up the projects</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/EmbeddedFPSExample/guide/setting-up-the-projects.html#project-structure-with-darkrift" class="sidebar-link">Project Structure with Darkrift</a></li><li class="sidebar-sub-header"><a href="/EmbeddedFPSExample/guide/setting-up-the-projects.html#setup" class="sidebar-link">Setup</a></li><li class="sidebar-sub-header"><a href="/EmbeddedFPSExample/guide/setting-up-the-projects.html#setup-the-client" class="sidebar-link">Setup the Client</a></li><li class="sidebar-sub-header"><a href="/EmbeddedFPSExample/guide/setting-up-the-projects.html#setup-the-server" class="sidebar-link">Setup the Server</a></li><li class="sidebar-sub-header"><a href="/EmbeddedFPSExample/guide/setting-up-the-projects.html#creating-a-folder-junction-to-share-scripts" class="sidebar-link">Creating a Folder Junction to Share Scripts</a></li></ul></li><li><a href="/EmbeddedFPSExample/guide/client-basics-and-login-system-part-1.html" class="sidebar-link">Client Basics and Login System Part 1</a></li><li><a href="/EmbeddedFPSExample/guide/server-basics-and-login-system.html" class="sidebar-link">Server Basics and Login System</a></li><li><a href="/EmbeddedFPSExample/guide/room-system-part-1-server-side.html" class="sidebar-link">Room System Part 1 (Server-Side)</a></li><li><a href="/EmbeddedFPSExample/guide/client-login-system-part-2-and-lobby.html" class="sidebar-link">Client Login System Part 2 and Lobby</a></li><li><a href="/EmbeddedFPSExample/guide/room-system-part-2-server-side.html" class="sidebar-link">Room System Part 2 (Server-Side)</a></li><li><a href="/EmbeddedFPSExample/guide/player-movement-interpolation-and-client-side-prediction.html" class="sidebar-link">Player-Movement, Interpolation and Client Side Prediction</a></li><li><a href="/EmbeddedFPSExample/guide/multiplayer-gameplay.html" class="sidebar-link">Multiplayer Gameplay (Synchronization and Buffers)</a></li><li><a href="/EmbeddedFPSExample/guide/reconciliation.html" class="sidebar-link">Reconciliation</a></li><li><a href="/EmbeddedFPSExample/guide/health-shooting-lag-Compensation.html" class="sidebar-link">Health, Shooting, Lag Compensation</a></li><li><a href="/EmbeddedFPSExample/guide/networking-discussion.html" class="sidebar-link">Networking Discussion</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="setting-up-the-projects"><a href="#setting-up-the-projects" class="header-anchor">#</a> Setting up the projects</h1> <h2 id="project-structure-with-darkrift"><a href="#project-structure-with-darkrift" class="header-anchor">#</a> Project Structure with Darkrift</h2> <p>Before we start our project we should take a minute to think about our project structure.
We will create a classic FPS game in this tutorial with a server and a client application. The server application will have full control (authoritative server) over the game, so cheating will be impossible.</p> <p>The client will be a unity game with a normal unity project. For the server we have 2 possibilities:</p> <ul><li>Use an embedded server (We will also run the server in Unity)</li> <li>Use a standalone server (The server will be just a C# console application)</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If you use an embedded server you can also create the server and the client in the same project. But you will have to make sure that the client build includes no server code and vice versa which makes it a bit complicated.</p></div> <h3 id="reasons-for-an-embedded-server"><a href="#reasons-for-an-embedded-server" class="header-anchor">#</a> Reasons for an Embedded Server</h3> <ul><li>You can use a similar project structure on your client and server (Monobehaviors)</li> <li>Access to Unity features like Physics, Navmesh or Collision detection.</li> <li>You can use graphical outputs for debugging or testing on your server.</li></ul> <h3 id="reasons-for-a-standalone-server"><a href="#reasons-for-a-standalone-server" class="header-anchor">#</a> Reasons for a Standalone Server</h3> <ul><li>Less overhead then an embedded server (slightly increased performance)</li> <li>Easier to manage references and use external libraries (NuGet packages, C# 7 support...)</li> <li>Easier to containerize and deploy for production</li> <li>You can still use some Unity functions by referencing the UnityEngine.dll.</li></ul> <p>In the end standalone and embedded servers are pretty similar. We will go for an embedded server in this tutorial because we want to use the Unity collision detection and because I usually write standalone applications and want to try something different.</p> <h2 id="setup"><a href="#setup" class="header-anchor">#</a> Setup</h2> <ul><li>Create a repository or folder for the unity projects, name it something like EmbeddedFPSExample</li></ul> <h2 id="setup-the-client"><a href="#setup-the-client" class="header-anchor">#</a> Setup the Client</h2> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>This project uses new physics features which were introduced in Unity 2018.3 so you have to use 2018.3 or a newer version of Unity.</p></div> <ul><li>Create a new Unity project (I called mine EmbeddedFPSClient).</li> <li>In Edit -&gt; Project Settings -&gt; Player -&gt; Other settings, make sure that Scripting Runtime Version is set to .Net 4.x equivalent.</li> <li>In Edit -&gt; Project Settings -&gt; Time, set Fixed Timestep to 0.025 and Maximum Allowed Timestep to 100</li> <li>In Edit =&gt; Project Settigs =&gt; Physics, set <code>Auto Sync Transforms</code> to true.</li> <li>Head to the Asset Store and download the newest version of Darkrift 2.</li> <li>Create a basic folder structure (create a &quot;Prefabs&quot;, &quot;Scenes&quot; and &quot;Scripts&quot; folder)</li> <li>Create a Scene &quot;Main&quot; in the scenes folder</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Auto Sync Transforms is needed for the reconciliation (correction) code. It could be disabled by using <code>Physics.SyncTransforms</code> at the right places but was done so for simplicity.</p></div> <h2 id="setup-the-server"><a href="#setup-the-server" class="header-anchor">#</a> Setup the Server</h2> <p>Repeat the setup from the client but name the project something like EmbeddedFPSServer</p> <h2 id="creating-a-folder-junction-to-share-scripts"><a href="#creating-a-folder-junction-to-share-scripts" class="header-anchor">#</a> Creating a Folder Junction to Share Scripts</h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Creating a folder junction to share script is an outdated way of doing this. Since the introduction of the Unity Package Manager I'd recommend using a local package. You can learn more about the Unity Package Manager <a href="https://docs.unity3d.com/Manual/Packages.html" target="_blank" rel="noopener noreferrer">here.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Another option could be to use a separate standalone c# library project and create a dll which is shared between the two projects.</p></div> <p>Some scripts will be used by the client and the server, having a way to synchronize them saves time. There are many good ways to do that. For the sake of simplicity we will use a folder junction. A folder junction synchronizes all files inside a folder to another folder.</p> <ul><li>Create a &quot;Shared&quot; folder inside the Scripts folder of the client project.</li></ul> <h3 id="windows"><a href="#windows" class="header-anchor">#</a> Windows:</h3> <ul><li>open the cmd.exe</li> <li>type: <code>mklink /J &quot;&lt;client-shared-folder&gt;&quot; &quot;&lt;server-shared-folder&gt;&quot;</code><br>The paths must be absolute for mklink to work e. g. <code>mklink /J &quot;C:\Users\&lt;user&gt;\Documents\EmbeddedFPSExample\EmbeddedFPSServer\Assets\Scripts\Shared&quot; &quot;C:\Users\&lt;user&gt;\Documents\EmbeddedFPSExample\EmbeddedFPSClient\Assets\Scripts\Shared&quot;</code></li></ul> <h3 id="mac-os-x"><a href="#mac-os-x" class="header-anchor">#</a> Mac OS X</h3> <ul><li>open the terminal</li> <li>type: <code>ln -s &quot;&lt;client-shared-folder&gt;&quot; &quot;&lt;server-shared-folder&gt;&quot;</code>\</li></ul> <p>This junction will share all changes that we make on the client <strong>But not the other way around so we will edit scripts in the shared folders always in the clients folder.</strong></p> <p>Now the setup is done and we can start to write some code 😃</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/EmbeddedFPSExample/guide/introduction.html" class="prev">
        Introduction
      </a></span> <span class="next"><a href="/EmbeddedFPSExample/guide/client-basics-and-login-system-part-1.html">
        Client Basics and Login System Part 1
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/EmbeddedFPSExample/assets/js/app.debd0cf8.js" defer></script><script src="/EmbeddedFPSExample/assets/js/2.6b282e9d.js" defer></script><script src="/EmbeddedFPSExample/assets/js/20.2f1b2705.js" defer></script>
  </body>
</html>
